@model Pweb_kilme_.Models.DTO.DatosreservacionDTO
@using Microsoft.AspNetCore.Identity
@inject UserManager<Pweb_kilme_.Models.dbModels.ApplicationUser> UserManager

<!-- Asegúrate de que la ruta del archivo CSS sea correcta -->
<link rel="stylesheet" href="~/css/PantallaReservacion.css" asp-append-version="true">

<!-- Galería de Imágenes -->
<section class="container mt-4">
    <div id="galleryCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="~/IMG/img-quinta.jpg" class="d-block w-100" alt="Imagen 1">
            </div>
            <div class="carousel-item">
                <img src="~/IMG/img2.jpg" class="d-block w-100" alt="Imagen 2">
            </div>
            <div class="carousel-item">
                <img src="~/IMG/img3.jpg" class="d-block w-100" alt="Imagen 3">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#galleryCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#galleryCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
        </button>
    </div>
</section>

<!-- Descripción del lugar -->
<section class="container mt-4">
    <h2 class="lettercolor">Quinta</h2>
    <p class="lettercolor">
        Lorem ipsum dolor, sit amet consectetur adipisicing elit. Molestias itaque inventore, libero iusto,
        necessitatibus voluptate provident repudiandae tempore mayores repellendus asperiores optio dicta quo nulla
        nostrum obcaecati. Consequatur, tempora cumque.
    </p>
</section>

<!-- Apartado de Reservas -->
<section class="container mt-4">
    <div class="row">
        <div class="col-md-6">
            <h3 class="lettercolor">Calendario de Reservas</h3>
            <div class="calendar-container">
                <div class="header">
                    <button onclick="cambiarMes(-1)">&#8592;</button>
                    <h2 id="month-year" class="lettercolor">Noviembre 2024</h2>
                    <button onclick="cambiarMes(1)">&#8594;</button>
                </div>
                <div class="calendar">
                    <!-- Días generados por JavaScript -->
                </div>
                <div class="legend mt-2">
                    <span class="lettercolor legend-item reservado">Reservado</span>
                    <span class="lettercolor legend-item libre">Libre</span>
                </div>
            </div>
        </div>
        <div class="col-md-6">
            <h3 class="lettercolor">Reserva tu Estancia</h3>
            <form id="bookingForm" asp-action="Create" method="post" enctype="multipart/form-data">
                <div class="mb-3">
                    <label for="IdQuinta" class="lettercolor form-label">Quinta</label>
                    <input type="hidden" id="IdQuinta" name="IdQuinta" value="@Model.IdQuinta" />
                    <p class="form-control-static">@Model.IdQuinta</p>
                </div>
                <div class="mb-3">
                    <label for="Fecha" class="lettercolor form-label">Fecha</label>
                    <input type="date" class="form-control" id="Fecha" name="Fecha" required>
                </div>
                <div class="mb-3">
                    <label for="NumInvitados" class="lettercolor form-label">Número de invitados</label>
                    <input type="number" class="form-control" id="NumInvitados" name="NumInvitados" required>
                </div>
                <input type="hidden" id="IdEstado" name="IdEstado" value="2" />
                <input type="hidden" id="IdUsuario" name="IdUsuario" value="@(User?.Identity?.IsAuthenticated == true ? UserManager.GetUserId(User) : string.Empty)"/>
                <button type="submit" class="lettercolor btn btn-primary">Reservar</button>
            </form>
        </div>
    </div>
</section>

<div>
    <a asp-action="Index">Back to List</a>
</div>

<!-- Asegúrate de que la ruta del archivo JavaScript sea correcta -->
<script src="~/js/PantallaReservacion.js" asp-append-version="true"></script>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}
